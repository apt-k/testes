<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Donasi Uang - RedVengers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="donasi.css">
</head>
<body>

<div class="container">
  <h3 class="text-center text-danger mb-4">Form Donasi Uang</h3>
  <form id="formDonasi" onsubmit="munculkanPopup(event)" novalidate>
    <form id="formDonasi" onsubmit="munculkanPopup(event)" novalidate>
      <div class="mb-3">
        <label for="nama" class="form-label">Nama</label>
        <input type="text" id="nama" class="form-control" required>
        <div class="invalid-feedback">Nama wajib diisi.</div>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" id="email" class="form-control" required>
        <div class="invalid-feedback">Email wajib diisi dengan benar.</div>
      </div>

      <div class="mb-3">
        <label for="jumlah" class="form-label">Jumlah Donasi (Rp)</label>
        <input type="number" id="jumlah" class="form-control" required>
        <div class="invalid-feedback">Masukkan jumlah donasi yang valid.</div>
      </div>

      <div class="d-flex justify-content-between gap-2">
        <button type="button" class="btn btn-danger w-50" 
        onclick="window.location.href='index.html'">Kembali ke Beranda</button>
        <button type="submit" class="btn btn-danger w-50">Selanjutnya</button>
      </div>
    </form>
</div>

<!-- Modal Instruksi Pembayaran -->
<div class="modal fade" id="popupPembayaran" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="modalLabel">Instruksi Pembayaran</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Tutup"></button>
      </div>
      <div class="modal-body">
        <p>Terima kasih, <strong><span id="namaPopup"></span></strong>!</p>
        <p>Silakan transfer sebesar <strong>Rp <span id="jumlahPopup"></span></strong> ke:</p>
        <ul>
          <li>Bank: BNI</li>
          <li>No Rekening: <strong>1234567890</strong></li>
          <li>a.n. Yayasan RedVengers Indonesia</li>
        </ul>
        <p>Setelah transfer, kirim bukti ke WhatsApp: <strong>0812-XXXX-XXXX</strong></p>
        
        <div class="mb-3">
          <label for="bukti" class="form-label">Unggah Bukti Transfer:</label>
          <input type="file" class="form-control" id="bukti" accept="image/*" required>
        </div>

        <p class="text-muted">Setelah mengupload bukti, klik tombol di bawah untuk menyelesaikan proses donasi. Konfirmasi akan dikirim ke <strong><span id="emailPopup"></span></strong>.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" onclick="tampilkanSukses()">Konfirmasi Pembayaran</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Sukses -->
<div class="modal fade" id="modalSukses" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-sm">
    <div class="modal-content text-center p-4 rounded-4">
      <div class="icon-circle mb-3">
        <i class="bi bi-check-circle-fill"></i>
      </div>
      <div class="modal-body">
        <h5 class="mb-2 text-success">Konfirmasi Berhasil!</h5>
        <p>Email telah dikirim ke <strong><span id="emailSukses"></span></strong>.</p>
        <p>Terima kasih telah berdonasi.</p>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-danger w-100" onclick="window.location.href='index.html'">Kembali ke Beranda</button>
      </div>
    </div>
  </div>
</div>

<!-- Script -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function munculkanPopup(event) {
    event.preventDefault();

    const nama = document.getElementById('nama');
    const email = document.getElementById('email');
    const jumlah = document.getElementById('jumlah');

    let valid = true;

    [nama, email, jumlah].forEach(input => {
      if (!input.value) {
        input.classList.add('is-invalid');
        valid = false;
      } else {
        input.classList.remove('is-invalid');
      }
    });

    if (!valid) return;

    document.getElementById('namaPopup').innerText = nama.value;
    document.getElementById('jumlahPopup').innerText = parseInt(jumlah.value).toLocaleString('id-ID');
    document.getElementById('emailPopup').innerText = email.value;

    const modal = new bootstrap.Modal(document.getElementById('popupPembayaran'));
    modal.show();
  }

  function tampilkanSukses() {
    const email = document.getElementById('email').value;
    const bukti = document.getElementById('bukti');

    // Validasi bukti sudah diunggah
    if (!bukti.files || bukti.files.length === 0) {
      alert("Silakan unggah bukti transfer terlebih dahulu.");
      bukti.focus();
      return;
    }

    document.getElementById('emailSukses').innerText = email;

    // Tutup modal pembayaran
    bootstrap.Modal.getInstance(document.getElementById('popupPembayaran')).hide();

    // Tampilkan modal sukses
    const modal = new bootstrap.Modal(document.getElementById('modalSukses'));
    modal.show();
  }
</script>

</body>
</html>
